{% extends 'base.html' %}
{% load static %}

{% block title %}Profile - Marketplace{% endblock %}

{% block content %}
<div class="container">
    <h1>My Profile</h1>
    
    <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 2rem; margin: 2rem 0;">
        <div>
            <h2>Profile Information</h2>
            <form method="post">
                {% csrf_token %}
                <div class="form-group">
                    <label for="{{ form.phone.id_for_label }}">Phone</label>
                    {{ form.phone }}
                </div>
                <div class="form-group">
                    <label for="{{ form.address.id_for_label }}">Address</label>
                    {{ form.address }}
                </div>
                <div class="form-group">
                    <label for="{{ form.city.id_for_label }}">City</label>
                    {{ form.city }}
                </div>
                <div class="form-group">
                    <label for="{{ form.state.id_for_label }}">State</label>
                    {{ form.state }}
                </div>
                <div class="form-group">
                    <label for="{{ form.zip_code.id_for_label }}">ZIP Code</label>
                    {{ form.zip_code }}
                </div>
                <div class="form-group">
                    <label for="{{ form.country.id_for_label }}">Country</label>
                    {{ form.country }}
                </div>
                <button type="submit" class="btn btn--primary">Update Profile</button>
            </form>
        </div>
        
        <div>
            <h2>Order History</h2>
            {% if orders %}
                <div style="margin-top: 1rem;">
                    {% for order in orders %}
                        <div style="border: 1px solid var(--color-border); border-radius: 0.5rem; padding: 1.5rem; margin-bottom: 1rem;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                                <div>
                                    <h3 style="margin-bottom: 0.5rem;">
                                        <a href="{% url 'orders:order_detail' order.id %}">Order #{{ order.id }}</a>
                                    </h3>
                                    <p style="color: var(--color-text-light); font-size: 0.875rem;">
                                        {{ order.created_at|date:"F d, Y H:i" }}
                                    </p>
                                </div>
                                <div>
                                    <span class="status-badge {{ order.get_status_display_class }}">
                                        {{ order.get_status_display }}
                                    </span>
                                </div>
                            </div>
                            <div style="display: flex; justify-content: space-between;">
                                <div>
                                    <p style="font-size: 0.875rem; color: var(--color-text-light);">
                                        {{ order.items.count }} item{{ order.items.count|pluralize }}
                                    </p>
                                </div>
                                <div style="font-weight: bold; color: var(--color-primary);">
                                    ${{ order.total_amount }}
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            {% else %}
                <p>You haven't placed any orders yet.</p>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}

